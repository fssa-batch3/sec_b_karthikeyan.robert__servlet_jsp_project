<!DOCTYPE html>
<html lang="en">
    <head>
        <title>KN funding</title>
        <link rel="stylesheet" href="../../assets/css/Main_page_style.css">
        <link rel="stylesheet" href="../../assets/css/style.css">
        <link rel="stylesheet" href="../../assets/css/Inside_profile_style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Yeseva+One&display=swap" rel="stylesheet">
        <link rel="icon" type="image/x-icon" href="./project/assets/images/logo.png">
    </head>
    
    <header>
        <a href="./Main_page.html">
            <img src="../../assets/images/logo.png" alt="image" class="logo"> 
        </a>
        <div class="search_input_logo">
            <input class="search_box" placeholder="Search Campaigns & Petitions"></input>
            <button class="search_button">
                <img src="../../assets/images/search_logo.png" alt="image" class="search_logo">
            </button>
        </div>
        <div class="profile_logo">
        
            <div id="user_name" class="profile_name">
                <!-- KARTHIKEYAN -->
            </div>
            <!-- <a href="./our profile/our_profile.html"> -->
            <div class="logo_profile">
                <div class="dropdown">
                    <img src="../../assets/images/user.png" alt="image" class="user_logo">
                    <div class="dropdown-content">
                        <a href="../../our profile/our_profile.html">profile</a>
                        <a href="../../../index.html">Log Out</a>
           
                    </div>
                </div>
            </div>
            <!-- </a> -->
    
        </div>
    
    </header>

    <body>
        <sevtion class="profile_heading">
            <h1 class="heading" id= "title_card">
                <!-- Help Sportsman Adithya Who Was Stabbed Multiple Times -->
            </h1>

        </sevtion>
        <sevtion class="profile_heading2">
            <h2 class="heading">
                <ul class="backers_count">
                    <a class="about_backer" href="../after_login_inside_profile/AL_inside_profile_1.html">
                        <li>About</li>
                    </a>
                    <a class=" about_backer" href="../after_login_backer/AL_backer_1.html">
                        <li>Backers (0)</li>
                    </a>
                </ul>
            </h2>

        </sevtion>

        <section class="profile">
        
            <div class="profile">
           
                <div class="profile_left">
                    <div class="profile_row_one">
                        <p>
                            <b style="color:black ;"> This campaign has been verified by KN Funding & medical team at the Hospital!</b>
                        </p>
                    </div>
                    <div class="profile_row_two">
                        <!-- <img src="../../assets/images/story_1.jpg" alt="image" class="" width="800px" height="500px"> -->
                    </div>
                    <div class="profile_row_three">
                       
                        <p id = "detail_desc"> 
                            
                        </p>

                    </div>
                </div>
            
                <div class="profile_right">
                    <div class="right_row_one">
                        <img src="../../assets/images/my_pic.jpg" alt="image" class="my_pic_logo" width="40px" height="40px">
                        <p>
                            Karthikeyan </br>
                            Chennai
                        </p>

                    </div>
                    <div class="right_row_two">
                        <div class="row_two">
                            <b id="category_type">
                                #
                                 <!-- Medical Causes -->
                                </b>
                            
                        </div>
                        <div class="row_three"> 
                            <p>

                                ₹ 
                                <b id="funded_amount">
                                <!-- 0 -->
                                </b>
                                 <b>
                                 raised of 
                                </b>
                                ₹ 
                            
                            <b id="goal"> 
                             <!-- 3000000 -->
                            </b>
                            <b>
                                Goal
                            </b>
                        </p>
            
                            </div>
                        
                            <div>
                                <div class="progressa">
                                    <div class="progressab" style="    background-color: rgb(178, 222, 75);">
                                    </div>
                                    </div>
                            </div>
                                <div class="after_inline">
                                    <p>10 days left</p> 
                                    <p> 0 Backers</p>    
                                </div>
                </div>
                                <div class="right_row_three">
                                    <h2 class="h2_contribute">Contribute</h2>
                                    <div class="amount_column">

                                        
                                      
                                        <input type="number" id="set_amount_box" placeholder="Enter or Select an Amount" class="input_box" >
                                        <!-- pattern="{1,1000000000000}" -->
                                        <div class="row_four">
                                            <ul class="amount">
                                                <li data-value="1000" class="amount_box_1" id="get_amt_1" onclick="amtCallBtnOne()" >
                                                    <!-- <img src="../../assets/images/rupee.png" alt="image" class="amount_img" width="14px" height="14px">  -->
                                                   <b> ₹ 1000  </b>
                                                </li>
                                                <li data-value="3000" class="amount_box_2" id="get_amt_2" onclick="amtCallBtnTwo()" >
                                                    <!-- <img src="../../assets/images/rupee.png" alt="image" class="amount_img" width="14px" height="14px">  -->
                                                <b> ₹ 3000 </b>
                                                </li>
                                                <li  data-value="5000" class="amount_box_3" id="get_amt_3" onclick="amtCallBtnThree()">
                                                    <!-- <img src="../../assets/images/rupee.png" alt="image" class="amount_img" width="14px" height="14px"> -->
                                                <b>  ₹ 5000 </b>
                                                </li>

                                            </ul>
                            
                                            <button class="contribute_button" type="submit" id="donateBTN" >
                                                <b class="contribute">DONATE</b>
                                              </button>
                                              

                                            
                                        </div>   
                                    
                                    </div>
                                    <div class="row_five_para"> 
                                        <p id="short_description">
                                           
                                        </p>
                                    </div>

                                </div>

            </div>

        </div>

    </section>
                                <footer class="footer">
                                    <section class="footer_section1">
                                        <img src="../../assets/images/footer_logo.png" alt="image" class="footer_logo">
            
                                        <div class="contact">
       
                                            <a href="https://www.instagram.com/karthi_kn_offl/" class="instagram_fb"> 
                                                <img src="../../assets/images/instagram.png" alt="image"
                                                    height="40px" width="50px"> 
                                            </a>
                                            <a href="https://www.facebook.com/profile.php?id=100057753970924" class="instagram_fb"> 
                                                <img src="../../assets/images/facebook.png" alt="image"
                                                    height="40px" width="50px">
                                            </a>
                                            <a href="https://www.linkedin.com/in/karthi-keyan-b01438254/" class="instagram_fb"> 
                                                <img src="../../assets/images/linkedin.png" alt="image"
                                                    height="42px" width="50px">
                                            </a>
            
                                        </div>
            
                                        <div class="footer_contact">
                                            <ul class="footer_contact_list">
                                                <li>
                                                    <h2>CONTACT INFO</h2>
                                                </li>
                                                <li>Global Infocity, St, Kodandarama Nagar, Perungudi, Chennai, Tamil Nadu, 600041.</li>
                                                <li>+91 7010847986</li>
                                                <li>karthikeyan.robert@fssa.freshworks.com</li>    

                                            </ul>

                                        </div>
                                    </section>    
                                    <section class="footer_section2">
                                        <div class="copyrights">
                                            <b> KN FUNDING is a Registered Trademark. © 2022 KN FUNDING. All Rights Reserved. Made by karthikeyan with 💗 </b>
                                        </div>
                                    </section>

                                </footer>

    <script>

        //user name
        const userId = JSON.parse(localStorage.getItem("userId"));
            const user_list = JSON.parse(localStorage.getItem("user_list"));

            function login_data(e) {
              return e.number == userId;
            }
            user_data = user_list.find(login_data);
            document.querySelector("#user_name").innerText = user_data.name;

        //inside profie

        const urlParams = new URLSearchParams(window.location.search);
        const puid = urlParams.get("puid");

        const user_id=JSON.parse(localStorage.getItem("userId"));

        function showAmt(){
        let total = document.getElementById("set_amount_box").value;
        window.location.href = "../after_login_payment/AL_payment_1.html?puid=" + puid + "&amount=" + total;

        }  




        let details = JSON.parse(localStorage.getItem("Request_list"));
        let unique_detail = details.filter(e => e.uuid == puid);

        image = document.createElement("img");
        image.setAttribute("width","800px");
        image.setAttribute("height","500px");
        image.setAttribute("src",unique_detail[0]["Featured Image"]);
        document.querySelector(".profile_row_two").append(image);
        
        document.querySelector("p#detail_desc").innerText = unique_detail[0]["Description"];
        document.querySelector("b#goal").innerText = unique_detail[0]["Goal"];


        document.querySelector("h1#title_card").innerText = unique_detail[0]["title"];
        document.getElementById("short_description").innerText = unique_detail[0]["shortdecp"];

        document.getElementById("category_type").innerText = unique_detail[0]["category"];

        
        //money selection input 

        function donateBTN(){

        const input_amt =  document.getElementById("set_amount_box").value;
                if (input_amt >= 50 && input_amt <= 9999999999) {
            // window.location.reload();
            } 
            else{
            alert("min amount to be donated is 50");
            window.location.reload();
            }
    }
        // console.log(input_amt)
        // else if (input_amt <= 50) {
        // alert("min amount to be donated is 50");
        // window.location.reload();
        // }   


        //money option button


        function amtCallBtnOne() {
            document.getElementById("set_amount_box").value = "1000";
        }
        function amtCallBtnTwo() { 
            document.getElementById("set_amount_box").value = "3000";
        }
        function amtCallBtnThree() {  
            document.getElementById("set_amount_box").value = "5000";
        }

        
        //donate button 

             document.getElementById("donateBTN").addEventListener("click",()=>{
                showAmt();
                // input_amt();
                donateBTN();
            });

          
            // progress bar  
             
            const donateValue = JSON.parse(localStorage.getItem("donar_deatils")) ?? [];
            
            let t_amount = 0;
            for(let i = 0; i<donateValue.length; i++){

                if(puid == donateValue[i]["DonateForId"])
                t_amount += donateValue[i]["totalAmount"];
                

            }
            document.getElementById("funded_amount").innerHTML = t_amount;

            console.log(t_amount);

            


            // for percentage

            let goal_amt=document.getElementById("goal").innerText;


            let colected_percentage=Math.floor((t_amount/goal_amt)*100);


            console.log(colected_percentage);


            // progress bar value 

            const progressval = colected_percentage;
            const elm = document.querySelectorAll(".progressab")[0];

            elm.style.width = `${progressval}%`;

            elm.innerText = `${progressval}%`;

            if (progressval > 90 && progressval <= 100) {
            elm.style.backgroundColor = "green";
            } else if (progressval > 1 && progressval < 90) {
            elm.style.backgroundColor = "tomato";
            }


    </script>

</body>

</html>